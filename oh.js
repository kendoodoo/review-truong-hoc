function Hermite_class(){var w,p,_=[];this.init=void(w=navigator.hardwareConcurrency||4),this.getCores=function(){return w},this.resample_auto=function(t,a,e,r,h){var i=this.getCores();window.Worker&&1<i?this.resample(t,a,e,r,h):(this.resample_single(t,a,e,!0),null!=h&&h())},this.resize_image=function(t,a,e,r,h){var i=document.getElementById(t),n=document.createElement("canvas");n.width=i.width,n.height=i.height,n.getContext("2d").drawImage(i,0,0),null==a&&null==e&&null!=r&&(a=i.width/100*r,e=i.height/100*r),null==e&&(o=i.width/a,e=i.height/o),a=Math.round(a),e=Math.round(e);var o=function(){var t=n.toDataURL();i.width=a,i.height=e,i.src=t,n=null};null==h||1==h?this.resample(n,a,e,!0,o):(this.resample_single(n,a,e,!0),o())},this.resample=function(t,r,a,e,h){var i=t.width,n=t.height;r=Math.round(r);var o=n/(a=Math.round(a));if(0<_.length)for(var l=0;l<w;l++)null!=_[l]&&(_[l].terminate(),delete _[l]);_=new Array(w);for(var s=t.getContext("2d"),c=[],g=2*Math.ceil(n/w/2),d=-1,l=0;l<w;l++){var u,M=d+1;n<=M||(d=M+g-1,d=Math.min(d,n-1),u=g,u=Math.min(g,n-M),c[l]={},c[l].source=s.getImageData(0,M,i,g),c[l].target=!0,c[l].start_y=Math.ceil(M/o),c[l].height=u)}!0===e?(t.width=r,t.height=a):s.clearRect(0,0,i,n);for(var f,m,v=0,l=0;l<w;l++)null!=c[l]&&(v++,f=new Worker(p),(_[l]=f).onmessage=function(t){v--;var a=t.data.core;_[a].terminate(),delete _[a];var e=Math.ceil(c[a].height/o);c[a].target=s.createImageData(r,e),c[a].target.data.set(t.data.target),s.putImageData(c[a].target,0,c[a].start_y),v<=0&&null!=h&&h()},m={width_source:i,height_source:c[l].height,width:r,height:Math.ceil(c[l].height/o),core:l,source:c[l].source.data.buffer},f.postMessage(m,[m.source]))},p=window.URL.createObjectURL(new Blob(["(",function(){onmessage=function(t){for(var a=t.data.core,e=t.data.width_source,r=t.data.height_source,h=t.data.width,i=t.data.height,n=e/h,o=r/i,l=Math.ceil(n/2),s=Math.ceil(o/2),c=new Uint8ClampedArray(t.data.source),g=(c.length,h*i*4),t=new ArrayBuffer(g),d=new Uint8ClampedArray(t,0,g),u=0;u<i;u++)for(var M=0;M<h;M++){for(var f=4*(M+u*h),m=0,v=0,w=0,p=0,_=0,y=0,b=0,C=u*o,I=Math.floor(M*n),D=Math.ceil((M+1)*n),R=Math.floor(u*o),U=Math.ceil((u+1)*o),D=Math.min(D,e),U=Math.min(U,r),A=R;A<U;A++)for(var x=Math.abs(C-A)/s,B=M*n,L=x*x,j=I;j<D;j++){var k=Math.abs(B-j)/l,k=Math.sqrt(L+k*k);1<=k||(b+=(m=2*k*k*k-3*k*k+1)*c[3+(k=4*(j+A*e))],w+=m,c[3+k]<255&&(m=m*c[3+k]/250),p+=m*c[k],_+=m*c[1+k],y+=m*c[2+k],v+=m)}d[f]=p/v,d[1+f]=_/v,d[2+f]=y/v,d[3+f]=b/w}postMessage({core:a,target:d},[d.buffer])}}.toString(),")()"],{type:"application/javascript"})),this.resample_single=function(t,a,e,r){for(var h=t.width,i=t.height,n=h/(a=Math.round(a)),o=i/(e=Math.round(e)),l=Math.ceil(n/2),s=Math.ceil(o/2),c=t.getContext("2d"),g=c.getImageData(0,0,h,i),d=c.createImageData(a,e),u=g.data,M=d.data,f=0;f<e;f++)for(var m=0;m<a;m++){for(var v=4*(m+f*a),w=0,p=0,_=0,y=0,b=0,C=0,I=0,D=f*o,R=Math.floor(m*n),U=Math.ceil((m+1)*n),A=Math.floor(f*o),x=Math.ceil((f+1)*o),U=Math.min(U,h),x=Math.min(x,i),B=A;B<x;B++)for(var L=Math.abs(D-B)/s,j=m*n,k=L*L,q=R;q<U;q++){var E=Math.abs(j-q)/l,E=Math.sqrt(k+E*E);1<=E||(I+=(w=2*E*E*E-3*E*E+1)*u[3+(E=4*(q+B*h))],_+=w,u[3+E]<255&&(w=w*u[3+E]/250),y+=w*u[E],b+=w*u[1+E],C+=w*u[2+E],p+=w)}M[v]=y/p,M[1+v]=b/p,M[2+v]=C/p,M[3+v]=I/_}!0===r?(t.width=a,t.height=e):c.clearRect(0,0,h,i),c.putImageData(d,0,0)}}
